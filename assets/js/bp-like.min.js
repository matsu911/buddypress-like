function bp_like() {   
    jQuery('.like, .unlike, .like_blogpost, .unlike_blogpost').click(function() {
        var type = jQuery(this).attr('class'), id = jQuery(this).attr('id');
        
        jQuery(this).addClass('loading');

        jQuery.post(ajaxurl, {
            action: 'activity_like',
            'cookie': encodeURIComponent(document.cookie),
            'type': type,
            'id': id
        },
        function(data) {
            jQuery('#' + id).fadeOut(50, function() {
                jQuery(this).html(data).removeClass('loading').fadeIn(50);
            });

            // Swap from like to unlike
            var newID, pureID;
            if (type === 'button like') {
                newID = id.replace("like", "unlike");
                jQuery('#' + id).removeClass('like').addClass('unlike').attr('title', bp_like_terms_unlike_message).attr('id', newID);
            } else if (type === 'acomment-reply bp-primary-action like') {
                newID = id.replace("like", "unlike");
                jQuery('#' + id).removeClass('like').addClass('unlike').attr('title', bp_like_terms_unlike_message).attr('id', newID);
            } else if (type === 'button like_blogpost') {
                newID = id.replace("like", "unlike");
                jQuery('#' + id).removeClass('like_blogpost').addClass('unlike_blogpost').attr('title', bp_like_terms_unlike_message).attr('id', newID);
            } else if (type === 'button unlike_blogpost') {
                newID = id.replace("unlike", "like");
                jQuery('#' + id).removeClass('unlike_blogpost').addClass('like_blogpost').attr('title', bp_like_terms_unlike_message).attr('id', newID);
            } else if (type === 'acomment-reply bp-primary-action unlike') {
                newID = id.replace("unlike", "like");
                jQuery('#' + id).removeClass('unlike').addClass('like').attr('title', bp_like_terms_like_message).attr('id', newID);
            } else {
                newID = id.replace("unlike", "like");
                jQuery('#' + id).removeClass('unlike').addClass('like').attr('title', bp_like_terms_like_message).attr('id', newID);
            }
        });

        return false;
    });
}
jQuery(document).ready(bp_like);
jQuery(document).ajaxComplete(bp_like);

jQuery('#more').click(bp_like);

// The function bp_like_likers() creates the popup to display likers of an item.
// TODO: Add effects changes.
$(function bp_like_likers() {
    $( "#dialog" ).dialog({
      autoOpen: false,
      show: {
        effect: "blind",
        duration: 1000
      },
      hide: {
        effect: "explode",
        duration: 1000
      }
    });
 
    $( "#opener" ).click(function() {
      $( "#dialog" ).dialog( "open" );
    });
  });